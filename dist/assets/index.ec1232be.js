const c=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}};c();class l{constructor(){this.outputDiff=document.getElementById("outputDiff"),this.input=document.getElementById("input"),this.go=document.getElementById("go"),this.output=document.getElementById("output"),this.clear=document.getElementById("clear"),this.recognition=new window.webkitSpeechRecognition,this.dmp=new diff_match_patch,this.listening=!1}init(){this.initRecognition(),this.initListeners(),this.input.value=this.cleanText(this.input.value)}initRecognition(){this.recognition.lang="fr-FR",this.recognition.continuous=!0,this.recognition.interimResults=!1,this.recognition.onresult=i=>{const n=i.results.item(i.resultIndex).item(0).transcript,e=n.charAt(0).toUpperCase()+n.slice(1);this.output.innerText+=this.cleanText(e);const t=this.dmp.diff_main(this.input.value,this.output.innerText);this.dmp.diff_cleanupSemantic(t),this.outputDiff.innerHTML=this.dmp.diff_prettyHtml(t)}}cleanText(i){const s="\xC1\xC4\xC2\xC0\xC3\xC5\u010C\xC7\u0106\u010E\xC9\u011A\xCB\xC8\xCA\u1EBC\u0114\u0206\xCD\xCC\xCE\xCF\u0147\xD1\xD3\xD6\xD2\xD4\xD5\xD8\u0158\u0154\u0160\u0164\xDA\u016E\xDC\xD9\xDB\xDD\u0178\u017D\xE1\xE4\xE2\xE0\xE3\xE5\u010D\xE7\u0107\u010F\xE9\u011B\xEB\xE8\xEA\u1EBD\u0115\u0207\xED\xEC\xEE\xEF\u0148\xF1\xF3\xF6\xF2\xF4\xF5\xF8\xF0\u0159\u0155\u0161\u0165\xFA\u016F\xFC\xF9\xFB\xFD\xFF\u017E\xFE\xDE\u0110\u0111\xDF\xC6a\xB7/_,:;\u2026",n="AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa---    ";for(let e=0,t=s.length;e<t;e++)i=i.replace(new RegExp(s.charAt(e),"g"),n.charAt(e));return i.replace(/(\.|!|«|\?|»|,)+/gm," ").replace(/’+/gm,"'").replace(/[ ]{2,}/gm," ").toLowerCase()}initListeners(){this.go.addEventListener("click",i=>{i.preventDefault(),this.listening?(this.recognition.stop(),this.listening=!1,this.go.innerText="C'est parti"):(this.recognition.start(),this.listening=!0,this.go.innerText="Arr\xEAter")},!1),this.clear.addEventListener("click",i=>{i.preventDefault(),this.recognition.stop(),this.listening=!1,this.go.innerText="C'est parti",this.output.innerText="",this.outputDiff.innerHTML=""},!1),this.input.addEventListener("blur",()=>{this.input.value=this.cleanText(this.input.value)},!1)}}window.webkitSpeechRecognition?new l().init():alert("Reconnaissance vocale non disponible !");
